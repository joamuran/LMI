## Web Components

Els Web Components són una tecnologia estàndard de la web que permet crear components reutilitzables, encapsulats i amb un estil i funcionalitat independents de la resta de la pàgina.

Els **Web Components** permeten crear **elements HTML personalitzats** que encapsulen estructura (HTML), estils (CSS) i comportament (JS), oferint una forma **modular i reutilitzable** de construir aplicacions web.

## Què ens aporten els Web Components?

Els principals beneficis dels Web Components són:

* **Modularitat**: Cada component és independent i reutilitzable.
* **Encapsulació**: Els estils i l’estructura no afecten la resta de la pàgina.
* **Reutilitzable**: Es poden compartir i utilitzar en qualsevol projecte.
* **Natiu**: No depenen de frameworks com React o Angular.

## Parts d'un Web Component

Un Web Component es construeix amb tres tecnologies:

1. **Custom Elements**: Permet crear etiquetes HTML personalitzades.
2. **Shadow DOM**: Encapsula HTML (el DOM del component) i CSS (l'estil) dins del component.
3. **Templates i Slots**: Defineixen estructures HTML que actúen com a plantilles reutilitzables.

## Creació d'un Web Component

Veiem un primer exemple de Web Component senzill, que mostre un missatge de benvinguda.

### Pas 1. Creem una classe que estenga d'HTMLElement

Tot Web Component és una classe que s'estén (`extends`) de la classe HTML.

???question "Què volia dir que una classe estén d'altra?"
    Quan una classe *estén* o *deriva* d'altra, estem fent ús del mecanisme d'*herència* de la POO.

    És a dir, creem una nova classe, que *hereta* totes les propietats i mètodes d'una altra, per tant, el que fem és *estendre*, o *fer més gran* la seua funcionalitat.

```js
class MissatgeBenvinguda extends HTMLElement {
    constructor() {
        super(); // Crida al constructor de HTMLElement
        this.attachShadow({ mode: 'open' }); // Shadow DOM
        this.shadowRoot.innerHTML = `<h2>Benvingut a LMI!</h2>`;
    }
}

// Registrar el component
customElements.define('missatge-benvinguda', MissatgeBenvinguda);
```

Com veiem, en aquest codi:

* Hem definit la classe `MissatgeBenvinguda` com a una classe derivada de `HTMLElement`.
* Dins el constructor d'aquesta classe:
  * Invoquem el constructor de la classe pare (`super()`) per si aquesta ha de fer alguna inicialització.
  * Creem un **Shadow DOM** associat al component, amb `attachShadow()`. Això crea un DOM *ombra*, *ocult* o *intern* al component. El fet de definir-lo amb el paràmetre `{mode: open}`, indica que aquest DOM serà accessible des de fora del component.
  * Afegim el contingut al Shadow DOM, amb `shadowRoot.innerHTML`.
* Una vegada creat el document, l'hem de registrar, per tal que estiga accessible a la resta de codi Javascript. Per a això, fem ús de `customElements.define`, proporcionant com a arguments el nom que tindrà la nova etiqueta HTML (`missatge-benvinguda`) i la classe amb el Web Component (`MissatgeBenvinguda`).

### Pas 2: Usar el Web Component en HTML

Una vegada tenim definit el component, podem utilitzar-lo en l'HTML com si es tractara d'una etiqueta més:

```html
<missatge-benvinguda></missatge-benvinguda>
```

Amb això, se'ns mostrarà el missatge *Benvingut a LMI!* al document Web.

Ara per ara és codi que podríem haver utilitzat directament al document, però el més interessant és que **hem creat una etiqueta HTML pròpia!**. A l'apartat següent veurem com podem anar incorporant estils i personalitzant el component.

!!! note "Custom Elements"
    El component que hem definit és un **Custom Element**, una de les **tres tecnologies principals dels Web Components**. Els **Custom Elements** permeten definir etiquetes HTML personalitzades amb el seu propi comportament i estil.

    Tot i que podem crear etiquetes HTML personalitzades, per tal que siguen *Custom Elements*, hem de crear la classe i registrar-la en `customElements`. 

    A més, el nom dels Custom Elements han de ser compostos, i separats per un guió, com és `missatge-benvinguda`. Una bona pràctica és mantenir el nom de la classe com hem fet, en format coherent amb el nom del component, eliminant els guions i expressant-les en *UpperCamelCase*.
    
    Aquesta restricció de mantenir els noms compostos evitat conflictes amb etiquetes HTML estàndard i permet a HTML reconèixer que es tracta d'un element personalitzat.

