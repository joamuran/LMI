---
# Informació general del document
title: 5. Programació estructurada en Javascript
subtitle: Llenguatges de marques i sistemes de gestió de la informació (LMSGI)
authors: 
    - José A. Múrcia Andrés
lang: ca
page-background: img/bg.png

# Portada
titlepage: true
titlepage-rule-height: 0
# titlepage-rule-color: AA0000
# titlepage-text-color: AA0000
titlepage-background: img/portada.png
# logo: img/logotext.png

# Taula de continguts
toc: true
toc-own-page: true
toc-title: Continguts

# Capçaleres i peus
header-left: Llenguatges de Marques
header-right: Curs 2024-2025
footer-left: IES Jaume II El Just
footer-right: \thepage/\pageref{LastPage}

# Imatges
float-placement-figure: H
caption-justification: centering

# Llistats de codi
listings-no-page-break: false
listings-disable-line-numbers: false

header-includes:
     - \usepackage{lastpage}
---

## Estructures condicionals

### if

És la condició més senzilla:

```js
if (condició) {
 // bloc de codi a executar si la condició es compleix
}
```

**Exemple 1**

```js
if (hora < 12) {
 salut = "Bon dia";
}
```

### if / else

```js
if (condició) {
 // bloc de codi a executar si la condició es compleix
} else {
 // bloc de codi a executar si la condició no es compleix
}
```

**Exemple**

```js
if (hora < 12) {
    salut = "Bon dia";
} else {
    salut = "Bona vesprada";
}
```

### else if

Quan hi ha diverses condicions alternatives, podem utilitzar la estructura `else if`.

```js
if (condició1) {
    // bloc de codi a executar si la condició 1 es compleix
} else if (condició2) {
    // bloc de codi a executar si la condició 2 es compleix
} else {
 // bloc de codi a executar si cap de les dues condicions es compleix
}
```

**Exemple**

```js
if (hora < 12) {
 salut = "Bon dia";
} else if (hora < 21) {
 salut = "Bona vesprada";
} else {
 salut = "Bona nit";
}
```

### Switch

S'utilitza quan volem realitzar diferents accions segons múltiples condicions d'una expressió. Segons aquesta s'avalua, s'executarà un (o més, cal anar amb compte amb el `break`!) entre diversos blocs.

```js
switch(expressió) {
 case n1:
    // Bloc de codi a executar si expressió s'avalua a n1
 break;
 case n2:
    // Bloc de codi a executar si expressió s'avalua a n2
 break;
 default:
    // Bloc de codi a executar si l'expressió no coincideix
}
```

**Exemple:** Usant la funció `Date().getDay()` que retorna el dia de la setmana:

```js
switch (new Date().getDay()) {
    case 0:
        dia = "Diumenge";
        break;
    case 1:
        dia = "Dilluns";
        break;
    case 2:
        dia = "Dimarts";
        break;
    case 3:
        dia = "Dimecres";
        break;
    case 4:
        dia = "Dijous";
        break;
    case 5:
        dia = "Divendres";
        break;
    case 6:
        dia = "Dissabte";
        break;
    default:
       console.log("dia erroni");
}
```

El `break` indica que ja no cal seguir buscant més coincidències. Així evitem comparacions innecessàries i errors. També podem agrupar diversos casos (sense el `break` pel mig) quan hi ha codi comú.

**Exemple:**

```js
switch (new Date().getDay()) {
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
        dia = "dia laboral";
        break;
    case 0: // Diumenge
    case 6: // Dissabte
        dia = "cap de setmana";
        break;
    default:
       console.log("dia erroni");
}
```

## Estructures repetitives

### Bucle for

S'utilitza generalment quan sabem per endavant quantes repeticions necessitem:

```js
for (inicialització; condició_de_repetició ; increment ) {
    // Codi a executar
}
```

**Exemple:**

```js
for (i = 0; i < 10; i++) {
    console.log("Índex: " + i); // Sumem un string i un enter!
}
```

Sintàcticament, la inicialització, condició de repetició i l'increment no són necessàries, i el bucle anterior podria expressar-se així:

```js
var i = 0;
for (;;) {
 console.log(i++);
 if (i > 10) break; // El break trenca el flux del bucle
}
```

També podem inicialitzar diversos valors:

**Exemple:** Per a mostrar els elements d'un vector:

```js
vector = ["pera", "poma", "plàtan"];
for (i = 0, len = vector.length, text = ""; i < len; i++) {
    console.log(vector[i]);
}
```

### Bucle for/in - for/of

S'utilitza per a recórrer els elements d'un objecte:

```js
for (item in object) {
    ...
}
```

**Exemple:**

```js
let peli = {títol: "Han Solo: Una història de Star Wars", director: "Ron Howard"};

for (index in peli) {
    console.log(index + ":" + peli[index]);
}
```

També podem indexar els elements d'un vector:

```js
v = [1, 2, 3, 76, 4, 2, 5];
for (i in v) {
    console.log(v[i]);
}
```

!!! caution "Compte!"

     Un error habitual (per influència d'altres llenguatges de script) és confondre l'índex amb el valor de l'element:

     ```js
     for (e in v) {
     console.log(e); // Quan el que volem és accedir al contingut!
     }
     ```

Per a accedir directament als elements, JavaScript ofereix l'operador *`of`*. L'únic requeriment és que l'objecte siga ***iterable***.

Per exemple, el següent codi que imprimeix els elements del vector mitjançant `for..in`:

```js
for (i in v) {console.log(v[i]);}
```

Es pot expressar més senzillament mitjançant `for..of` amb:

```js
for (i of v) {console.log(i);}
```

### Bucles While i do/while

Són equivalents al bucle `for`, però amb una sintaxi diferent, on cal fer tant la inicialització com l'increment fora de la sintaxi de la instrucció.

**While**

```js
inicialització;
while (condició) {
    // accions;
    // increment;
};
```

**Do - While**

```js
// [inicialització;]
do {
    // accions;
    // [increment];
} while (condició);
```

**Exemples:**

```js
let i = 1;
while (i < 10) {
   console.log(i);
   i++;
}
```

```js
let i = 1;
do {
    console.log(i);
    i++;
} while (i < 10);
```

### Break i continue

El `break`, com hem vist, serveix per a eixir d'un bucle (i també d'un `case`). La instrucció `continue`, per la seua part, serveix per a passar a la següent iteració del bucle.

**Exemple**

```js
let i = 0;
for (;;) {
    i++;
    if (i % 2) continue; // A què s'avalua i % 2?
    console.log(i);
    if (i >= 10) break;
}
```
