---
# Informació general del document
title: 3. Elements del llenguatge
subtitle: Llenguatges de marques i sistemes de gestió de la informació (LMSGI)
authors: 
    - José A. Múrcia Andrés
lang: ca
page-background: img/bg.png

# Portada
titlepage: true
titlepage-rule-height: 0
# titlepage-rule-color: AA0000
# titlepage-text-color: AA0000
titlepage-background: img/portada.png
# logo: img/logotext.png

# Taula de continguts
toc: true
toc-own-page: true
toc-title: Continguts

# Capçaleres i peus
header-left: Llenguatges de Marques
header-right: Curs 2024-2025
footer-left: IES Jaume II El Just
footer-right: \thepage/\pageref{LastPage}

# Imatges
float-placement-figure: H
caption-justification: centering

# Llistats de codi
listings-no-page-break: false
listings-disable-line-numbers: false

header-includes:
     - \usepackage{lastpage}
---

## Variables

No és necessari declarar variables en JavaScript, encara que és altament recomanable. Per a declarar una variable fem:

```js
let variable = valor;
```

També es pot utilitzar `var` en lloc de `let`, però des de la versió ES2015, la recomanació és utilitzar `let`.

### El mode estrict

JavaScript permet treballar en mode *strict*, que obliga a declarar les variables abans d'utilitzar-les.

Per exemple, el següent script (saluda.js):

```js
nom = "Jose";
console.log("Hola " + nom);
```

Funcionaria correctament:

```shell
$ node saluda.js
Hola Jose
```

Però si habilitem el mode estricte:

```js
'use strict';

nom = "Jose";
console.log("Hola " + nom);
```

Mostraria el següent error:

```shell
/tmp/prova1.js:3
nom = "Jose"
 ^

ReferenceError: nom is not defined
    at Object.<anonymous> (/tmp/saluda.js:3:4)
    ...
```

El treballar en mode estricte ens obliga a definir variables, la qual cosa facilita detectar errors en escriure el nom d'aquestes.

### El nom de les variables

* El nom de les variables pot contindre qualsevol caràcter alfanumèric, a més del símbol `$` i `_`.
* Poden començar per qualsevol caràcter, `$` o `_`, però no per un número.
* El nom de les variables sol indicar-se en format **CamelCase** (la primera lletra de cada paraula en majúscula i la resta en minúscula).

### Tipus de variables i assignació dinàmica

Una variable també pot ser inicialitzada en la declaració amb qualsevol valor o amb el resultat d'una expressió.

```js
let variable = [valor | expressió];
```

Una variable en JavaScript emmagatzema dades d'un tipus concret en un moment donat. Mitjançant l'**assignació dinàmica de tipus**, el tipus de dada que emmagatzema la variable pot canviar en temps d'execució. És a dir, el tipus d'una variable es defineix de manera dinàmica en el moment de la seua assignació, no de la declaració.

Les variables poden ser:

* **Numèriques (number)**: Emmagatzema valors enters o decimals (amb el caràcter `.` per a separar la part entera de la decimal).
* **Text (string)**: Emmagatzema una llista de caràcters entre cometes, ja siguen simples o dobles. Si el text conté cometes, cal anar amb compte de no utilitzar internament les cometes utilitzades per a definir la cadena de text o bé escapant aquestes:

```js
var text = "Aquesta frase utilitza 'cometes simples'"
var text = 'Aquesta frase utilitza "cometes dobles escapades"'
```

En les cadenes de text també podem incloure:
  * Salt de línia: `\n`
  * Tabulador: `\t`
  * Barra inclinada: `\\`
  * Cometes escapades: `\"` o `\'`

**Conversió de tipus**

La conversió de tipus es realitza de manera automàtica. En cas d'ambigüitat, s'utilitzen prioritats.

**Exemple**: `'10'+3` suma un string i un number. En aquest cas, té prioritat la cadena de caràcters, per la qual cosa el *number* 3 es converteix a *string* '3'. En canvi, quan es tracta del `+` unari, només s'aplica a nombres, per la qual cosa `+ '20'` representa el número 20.

Exemples addicionals:

```
13 + 7 => 20
"13" + "7" => "137"
"13" + 7 => "137"
+"13" + 7 => 20
```

* **Tipus lògic**: Pot contindre els valors *true* i *false*.

```js 
let itemSeleccionat = false;
let mostrar = true;
```

* **Valors null i undefined**: Quan una variable no s'ha definit, el tipus és *undefined*. En canvi, quan volem referir-nos al valor nul, utilitzem *null*, sense cometes.

***Typeof***

Per a saber el tipus de dada que conté una variable en un moment donat, podem utilitzar l'operador `typeof`:

```javascript
> typeof(10) // 'number'
> typeof("hola") // 'string'
> typeof(true) // 'boolean'
> typeof(a) // 'undefined'
> typeof(null) // 'object'
> typeof({"nom": "Jose"}) // 'object'
```

### Vectors i JSON

Els vectors són col·leccions de valors/elements, que poden ser del mateix tipus o de tipus diferents (a diferència d'altres llenguatges, on els tipus han de ser homogènics).

Per a definir un vector, utilitzem els caràcters `[ ]` al principi i al final, i les comes (,) per a separar elements.

```js
let nom_vector = [valor1, valor2, ..., valorN];
```

**Exemples:**

```js
let dies_setmana = ["dilluns", "dimarts", "dimecres", "dijous", "divendres", "dissabte", "diumenge"];
let ex_vector = ["cadena1", num1, "cadena2", ["cadena1_vector1"]];
```

Per a accedir als elements, indiquem la posició en el vector (la posició inicial és 0):

* **Consulta**: `var avui = dies_setmana[1];`
* **Assignació**: `ex_vector[1] = "cadena3";`

Un vector buit es pot definir inicialitzant-lo a buit o creant un nou objecte de la classe Array:

```js
ex_vector2 = [];
ex_vector3 = new Array();
```

Els elements *JSON* (JavaScript Object Notation) són una forma compacta d'emmagatzemar i transmetre informació mitjançant parells clau-valor.

Els tipus de dades que podem representar en JSON són:

* **Nombres**, tant enters com decimals.
* **Cadenes**, expressades entre cometes i amb la possibilitat d'incloure seqüències d'escapada.
* **Booleans**, per a representar els valors *true* i *false*.
* **Null**, per a representar el valor nul.
* **Array**, per a llistes de zero o més valors de qualsevol tipus, entre claudàtors i separats per comes.
* **Objectes**, com a col·leccions de parells `<clau>:<valor>`, separats per comes i entre claus.

Exemple de notació JSON:

```json
{
 "curs": [
   {
     "nom": "Accés a Dades",
     "hores": 6,
     "qualificació": 8.45
   },
   {
     "nom": "Programació de serveis i processos",
     "hores": 3,
     "qualificació": 9.0
   }
 ]
}
```

JavaScript suporta la manipulació d'elements JSON de manera nativa, de manera que no necessitem cap llibreria per a utilitzar aquest format.

### Declaració de constants

Quan no desitgem que canvie el valor d'una variable o volem definir un valor global immutable, es recomana utilitzar la paraula reservada `const` en lloc de `let`. Per a les constants globals, es recomana usar majúscules.

```js
const PI = 3.1416;
```

## Operadors

Les variables es combinen entre si, formant expressions mitjançant els operadors. Aquestes expressions es poden avaluar, donant lloc a un nou valor, que pot utilitzar-se per a prendre decisions en un script, o per assignar-lo a noves variables.

Els operadors poden ser d'assignació, aritmètics, lògics o relacionals.

### Operador d'assignació (=)

S'utilitza per assignar a una variable un valor o expressió.

```js
let variable1 = expressió;
```

### Operadors aritmètics

Els operadors aritmètics treballen amb valors de tipus numèric per a obtindre altres valors numèrics. A més dels habituals de *suma (+)*, *resta (-)*, *multiplicació (*)*, *divisió (/)* i *rest de la divisió (%)*, hi ha els següents operadors:

* **Operadors d'increment (++) i decrement (--)**: incrementen o decrementen el valor d'una variable, amb diferent significat segons si es col·loquen davant o darrere de la variable.

```js
let a = 2;
let b = 2;
let c = ++a + b;
// c = 5
// a = 3
```

No és el mateix que:

```js
let a2 = 2;
let b2 = 2;
let c2 = a2++ + b2;
// c2 = 4
// a2 = 3
```

* **Suma/resta combinada (+= i -=)**: igual que en C i Java, podem utilitzar expressions com `a += 3` per simplificar l'expressió `a = a + 3`.

### Operadors lògics

S'apliquen sobre valors lògics i retornen un valor també lògic.

* **Negació**: `!`

```js
let a = true;
!a;
// false
```

Quan s'aplica a valors no lògics, el significat és el següent: el valor numèric 0 i la cadena de text buida es converteixen al valor lògic *false*, mentre que un nombre diferent de 0 i una cadena no buida es consideren *true*.

* **Operador and (&&)**: el resultat és cert si els dos operands ho són.
* **Operador or (||)**: el resultat és cert si un dels dos operands ho és.

### Operadors relacionals

Comparen valors de qualsevol tipus i ens proporcionen un valor de tipus lògic.

| Operador | Semàntica                     |
|----------|--------------------------------|
| `>`      | Major que                      |
| `<`      | Menor que                      |
| `>=`     | Major o igual                  |
| `<=`     | Menor o igual                  |
| `==`     | Igual que (només valor) <br> `5 == "5" ==> true` |
| `===`    | Igual que, en valor i tipus <br> `5 === "5" ==> false` |
| `!=`     | Distint de                     |
| `!==`    | Distint, o de tipus diferent   |

Quan es treballa amb cadenes, els operadors relacionals comparen, lletra a lletra, els caràcters ASCII de dues cadenes, d'esquerra a dreta.

### Altres operadors

A més dels operadors tradicionals, JavaScript proporciona altres operadors:

* **Operador condicional ternari**: permet assignar un valor a una variable basant-se en certa condició:

```js
nomVariable = (condició) ? valor1 : valor2;
```

Per exemple:

```js
let major_edad = (edat < 18) ? "Menor d'edat" : "Major d'edat";
```

* **Operador `typeof`**: com ja hem comentat abans, aquest operador obté el tipus de valor d'una variable.
